# ═══════════════════════════════════════════════════════════════
# Configuration du serveur Hytale
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# PATCHLINE
# ───────────────────────────────────────────────────────────────
# Version du serveur à télécharger
# Options: release, pre-release
PATCHLINE=release

# ───────────────────────────────────────────────────────────────
# OPTIONS JAVA (JVM)
# ───────────────────────────────────────────────────────────────
# Mémoire allouée au serveur
# -Xmx : Mémoire maximum
# -Xms : Mémoire initiale
# Recommandations:
#   - Serveur petit (1-5 joueurs)  : -Xmx2G -Xms1G
#   - Serveur moyen (5-10 joueurs) : -Xmx4G -Xms2G
#   - Serveur large (10-20 joueurs): -Xmx8G -Xms4G
#   - Serveur très large (20+)     : -Xmx16G -Xms8G
JAVA_MEMORY="-Xmx16G -Xms8G"

# Options Java supplémentairest
# --enable-native-access=ALL-UNNAMED : Évite les warnings Netty
JAVA_EXTRA_OPTS="--enable-native-access=ALL-UNNAMED"

# Options JVM complètes (ne pas modifier sauf si vous savez ce que vous faites)
JAVA_OPTS="$JAVA_MEMORY $JAVA_EXTRA_OPTS"

# ───────────────────────────────────────────────────────────────
# OPTIONS DU SERVEUR HYTALE
# ───────────────────────────────────────────────────────────────
# Chemin vers les assets (automatique, ne pas modifier)
# ASSETS_PATH sera défini automatiquement par le script

# Désactiver Sentry (télémétrie/crash reporting)
# Options: --disable-sentry (recommandé pour la vie privée)
DISABLE_SENTRY="--disable-sentry"

# Accepter les early plugins (plugins chargés tôt)
# ATTENTION: Peut causer des problèmes de stabilité
# Options: --accept-early-plugins
# ACCEPT_EARLY_PLUGINS="--accept-early-plugins"
ACCEPT_EARLY_PLUGINS="--accept-early-plugin"

# Mode d'authentification
# Options:
#   - authenticated (défaut) : Authentification Hytale requise
#   - offline : Mode hors ligne (pas d'authentification)
#   - insecure : Mode non sécurisé
# AUTH_MODE="--auth-mode authenticated"
AUTH_MODE=""

# Port du serveur (défaut: 5520)
# Laissez vide pour utiliser le port par défaut
# Ou utilisez --port lors du démarrage: ./manage-hytale-server.sh start normal --port 25565
SERVER_PORT=""

# Bind address (défaut: 0.0.0.0:5520)
# Laissez vide pour utiliser le défaut
# BIND_ADDRESS="--bind 0.0.0.0:5520"
BIND_ADDRESS=""

# Sauvegardes automatiques
# --backup : Active les sauvegardes automatiques
# --backup-frequency : Fréquence en minutes (défaut: 30)
# --backup-max-count : Nombre max de sauvegardes (défaut: 5)
# --backup-dir : Répertoire des sauvegardes
AUTO_BACKUP=""
# AUTO_BACKUP="--backup --backup-frequency 30 --backup-max-count 5"

# Options supplémentaires du serveur
# Ajoutez ici toute option supplémentaire
# Exemples:
#   --allow-op : Permet les opérateurs
#   --bare : Mode minimal
#   --singleplayer : Mode solo
EXTRA_SERVER_OPTS=""

# Options serveur complètes (construites automatiquement)
# Ne modifiez pas cette ligne
SERVER_OPTS="$DISABLE_SENTRY $ACCEPT_EARLY_PLUGINS $AUTH_MODE $BIND_ADDRESS $AUTO_BACKUP $EXTRA_SERVER_OPTS"

# ───────────────────────────────────────────────────────────────
# CHEMINS ET FICHIERS
# ───────────────────────────────────────────────────────────────
# Répertoire de sauvegarde (pour les backups de configuration)
BACKUP_DIR="Backups"

# Nombre de sauvegardes de configuration à conserver
BACKUP_RETENTION=10

# Répertoire des logs
LOGS_DIR="Logs"

# Fichier de log principal
# LOG_FILE="$LOGS_DIR/server.log"
LOG_FILE=""  # Laissez vide pour utiliser le défaut (Logs/server.log)

# ───────────────────────────────────────────────────────────────
# NOTES
# ───────────────────────────────────────────────────────────────
# Pour appliquer les modifications:
#   1. Éditez ce fichier
#   2. Redémarrez le serveur: ./manage-hytale-server.sh restart
#
# Pour voir toutes les options disponibles:
#   java -jar Server/HytaleServer.jar --help
#
# Documentation:
#   https://support.hytale.com/hc/en-us/articles/45326769420827
